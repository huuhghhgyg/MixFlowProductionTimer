@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --md-sys-color-primary: #B95E20;
    --md-sys-color-on-primary: #FFFFFF;
    --md-sys-color-primary-container: #FFDBCA;
    --md-sys-color-on-primary-container: #3A1800;
    --md-sys-color-secondary: #A08C7D;
    --md-sys-color-on-secondary: #FFFFFF;
    --md-sys-color-secondary-container: #FFDBCA;
    --md-sys-color-on-secondary-container: #2C160A;
    --md-sys-color-tertiary: #705D50;
    --md-sys-color-on-tertiary: #FFFFFF;
    --md-sys-color-tertiary-container: #FFDBCA;
    --md-sys-color-on-tertiary-container: #291807;
    --md-sys-color-error: #B3261E;
    --md-sys-color-on-error: #FFFFFF;
    --md-sys-color-error-container: #F9DEDC;
    --md-sys-color-on-error-container: #410E0B;
    --md-sys-color-surface: #FFF8F6;
    --md-sys-color-on-surface: #201A18;
    --md-sys-color-surface-variant: #F4DED4;
    --md-sys-color-on-surface-variant: #52443D;
    --md-sys-color-outline: #85746B;
    --md-sys-color-outline-variant: #D7C2B9;
  }

  html.dark {
    --md-sys-color-primary: #F97316;
    --md-sys-color-on-primary: #000000;
    --md-sys-color-primary-container: #7C2D03;
    --md-sys-color-on-primary-container: #FFEDD5;
    --md-sys-color-secondary: #A08C7D; /* TODO: Replace if dark specific value exists in tailwind.config.js */
    --md-sys-color-tertiary: #705D50; /* TODO: Replace if dark specific value exists in tailwind.config.js */
    --md-sys-color-error: #EF4444;
    --md-sys-color-on-error: #F3F4F6;
    --md-sys-color-error-container: #7F1D1D;
    --md-sys-color-on-error-container: #410E0B; /* TODO: Check if needs dark version */
    --md-sys-color-surface: #1F2937;
    --md-sys-color-on-surface: #F3F4F6;
    --md-sys-color-surface-variant: #374151;
    --md-sys-color-on-surface-variant: #E5E7EB;
    --md-sys-color-outline: #4B5563;
    --md-sys-color-outline-variant: #D7C2B9; /* TODO: Check if needs dark version, often outline-variant is lighter in dark */
  }
}

@layer components {
  .surface {
    @apply bg-surface dark:bg-surface-dark rounded-md-large p-6 border border-outline dark:border-outline-dark relative overflow-hidden;
  }

  .btn {
    @apply inline-flex items-center justify-center gap-2 px-6 h-10 border-none rounded-md-medium text-sm font-medium cursor-pointer transition-all duration-200 ease-in-out relative overflow-hidden whitespace-nowrap shrink-0;
  }

  .btn-filled {
    @apply btn bg-primary dark:bg-primary-dark text-on-primary dark:text-on-primary-dark;
    /* Adding a subtle hover/active effect as an approximation of the state layer */
    @apply hover:opacity-90 active:opacity-80;
  }

  .btn-tonal {
    @apply btn bg-surface-variant dark:bg-surface-variant-dark text-on-surface-variant dark:text-on-surface-variant-dark;
    /* Adding a subtle hover/active effect */
    @apply hover:opacity-90 active:opacity-80;
  }

  .btn-error {
    @apply btn bg-error dark:bg-error-dark text-on-error dark:text-on-error-dark;
    @apply hover:opacity-90 active:opacity-80;
  }

  .btn-toggle-expand {
    @apply bg-surface-variant dark:bg-surface-variant-dark text-on-surface-variant dark:text-on-surface-variant-dark p-2 h-9 min-w-[36px] rounded-md-small flex items-center justify-center transition-all duration-200 ease-in-out;
    /* Adding a subtle hover/active effect */
    @apply hover:opacity-90 active:opacity-80;
  }

  .text-field-input {
    @apply w-full px-4 py-3 border border-outline dark:border-outline-dark rounded-md-small bg-transparent text-base text-on-surface dark:text-on-surface-dark transition-colors duration-200 ease-in-out;
    @apply focus:outline-none focus:border-primary dark:focus:border-primary-dark;
    box-sizing: border-box; /* Ensure padding doesn't cause overflow */
  }

  .text-field-label {
    @apply absolute left-4 top-1/2 -translate-y-1/2 text-on-surface-variant dark:text-on-surface-variant-dark transition-all duration-200 ease-in-out bg-surface dark:bg-surface-dark px-1 pointer-events-none origin-left;
    /* Label floats up when input is focused or has content, remaining left-aligned */
    @apply peer-focus:top-0 peer-focus:-translate-y-1/2 peer-focus:scale-75 peer-focus:text-primary dark:peer-focus:text-primary-dark;
    @apply peer-[&:not(:placeholder-shown)]:top-0 peer-[&:not(:placeholder-shown)]:-translate-y-1/2 peer-[&:not(:placeholder-shown)]:scale-75 peer-[&:not(:placeholder-shown)]:text-primary dark:peer-[&:not(:placeholder-shown)]:text-primary-dark;
  }

  .section-header-title {
    @apply text-lg font-medium text-on-surface dark:text-on-surface-dark;
  }

  .task-item {
    @apply flex items-center justify-between px-4 py-3 rounded-md-small bg-surface-variant dark:bg-surface-variant-dark text-on-surface-variant dark:text-on-surface-variant-dark cursor-pointer border border-transparent transition-all duration-150 ease-in-out;
    /* Simulating state layer with opacity */
    @apply hover:bg-opacity-80 dark:hover:bg-opacity-80;
  }
  .task-item.active {
    @apply bg-primary-container dark:bg-primary-container-dark text-on-primary-container dark:text-on-primary-container-dark;
  }
  .task-item .task-item-text {
    @apply overflow-hidden text-ellipsis whitespace-nowrap flex-1 text-on-surface dark:text-on-surface-dark;
  }
  .task-item .delete-button {
    /* Mobile first: visible, larger tap target */
    @apply opacity-100 bg-transparent text-on-surface-variant dark:text-on-surface-variant-dark 
           w-10 h-10 p-2 rounded-lg /* Consistent with desktop target below */
           inline-flex items-center justify-center 
           transition-all duration-200 ease-in-out 
           hover:text-error dark:hover:text-error-dark 
           hover:bg-error-container dark:hover:bg-error-container-dark
           md:ml-2;
    /* Desktop overrides: hidden by default, aim for ~40px clickable area, icon ~20px */
    @apply md:opacity-0 md:w-10 md:h-10 md:p-2; /* Larger: 40px container, 8px padding -> 24px icon space */
  }
  .task-item .delete-button .material-symbols-rounded {
    @apply text-xl; /* Explicitly 24px, can be 20px if preferred via text-lg */
  }
  .task-item:hover .delete-button {
    @apply md:opacity-100;
  }

  .metric-item-container {
    @apply p-4 bg-surface-variant dark:bg-surface-variant-dark rounded-md-small text-sm text-on-surface-variant dark:text-on-surface-variant-dark relative overflow-hidden;
  }
  /* For the progress bar, JS will need to set the width via style="width: var(--progress)" on this element */
  .metric-item-progress-bar {
    @apply absolute top-0 left-0 h-full bg-primary dark:bg-primary-dark opacity-10 transition-all duration-300 ease-in-out z-0;
  }
  .metric-item-content {
    @apply relative z-10;
  }

  .log-entry {
    @apply flex items-center gap-2 px-3 py-2 text-sm text-on-surface dark:text-on-surface-dark rounded-md-small bg-surface-variant dark:bg-surface-variant-dark;
  }
  .log-entry .material-symbols-rounded {
    @apply text-lg;
  }

  .task-chip {
    @apply inline-flex items-center gap-2 h-8 px-4 bg-transparent text-on-surface dark:text-on-surface-dark border border-outline dark:border-outline-dark rounded-md-small cursor-pointer transition-all duration-200 ease-in-out whitespace-nowrap text-sm select-none outline-none box-border;
    @apply hover:border-on-surface dark:hover:border-on-surface-dark hover:opacity-90;
  }
  .task-chip.active {
    @apply bg-secondary-container dark:bg-secondary-container-dark text-on-secondary-container dark:text-on-secondary-container-dark border-transparent;
  }
  .task-chip .chip-content {
    @apply flex items-center justify-start gap-2 w-full h-full;
  }
  .task-chip .chip-text {
    @apply leading-none; /* Try to align text better with icons */
  }
  .task-chip .material-symbols-rounded {
    /* Make icon size match chip text size for better alignment */
    @apply text-sm leading-none;
  }
  .task-chip .check-icon {
    @apply ml-auto;
  }

  .fullscreen-mode {
    @apply hidden; /* Default to hidden */
  }
  .fullscreen-mode.active {
    @apply flex; /* Or 'block', depending on desired layout. 'flex' was on the HTML element */
  }

  .notification-status {
    @apply p-3 rounded-md-small bg-surface-variant dark:bg-surface-variant-dark flex items-center gap-2 text-sm text-on-surface-variant dark:text-on-surface-variant-dark;
  }
  .notification-status .material-symbols-rounded {
    @apply text-xl;
  }
  .notification-status a {
    @apply text-primary dark:text-primary-dark no-underline hover:underline;
  }
  .notification-status.warning {
    @apply bg-error-container dark:bg-error-container-dark text-on-error-container dark:text-on-error-container-dark;
  }

  /* Example for no-data-message if needed for specific styling */
  /* .no-data-message {
    @apply text-center text-on-surface-variant dark:text-on-surface-variant-dark py-4 text-sm;
  } */

  /* Collapsible section styles */
  /* Heatmap Section */
  #heatmapSection.collapsed .heatmap-scroll-container {
    @apply h-0 opacity-0;
  }
  #heatmapSection .btn-toggle-expand .material-symbols-rounded {
    @apply transition-transform duration-300 ease-in-out; /* Ensure transition is applied */
  }
  #heatmapSection.collapsed .btn-toggle-expand .material-symbols-rounded {
    @apply rotate-180;
  }

  /* History Log Section */
  #historySection #log-scroll-container {
    @apply overflow-hidden max-h-[800px]; /* Set initial max-height */
    transition: max-height 0.6s cubic-bezier(0.2, 0, 0.4, 1);
  }
  #historySection.collapsed #log-scroll-container {
    @apply max-h-0 opacity-0; /* Opacity can still transition if transition-all was on parent, or add transition-opacity here if needed */
    /* For smoother collapse, ensure padding/margin also transition or are removed */
    @apply p-0 m-0; /* Apply p-0 and m-0 for Tailwind equivalent of padding:0 and margin:0 */
  }
  #historySection.collapsed #log-scroll-container #historyLog {
    @apply mt-0;
  }
   #historySection .btn-toggle-expand .material-symbols-rounded {
    @apply transition-transform duration-300 ease-in-out; /* Ensure transition is applied */
  }
  #historySection.collapsed .btn-toggle-expand .material-symbols-rounded {
    @apply rotate-180;
  }
} 